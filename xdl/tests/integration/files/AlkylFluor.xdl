<Synthesis>
  <Hardware>
    <Component
      id="jacketed_filter"
      type="filter" />
    <Component
      id="rotavap"
      type="rotavap"
    />
    <Component
      id="buffer_flask"
      type="flask"
    />
  </Hardware>

  <Reagents>
    <!-- First step chemicals -->
    <Reagent
      id="2_6_diisopropylaniline" />
    <Reagent
      id="HOAc" />
    <Reagent
      id="MeOH" />
    <!-- As a solution in water in MeOH, according to the procedure -->
    <Reagent
      id="glyoxal_solution" />

    <!-- Second step chemicals -->
    <Reagent
      id="paraformaldehyde" />
    <Reagent
      id="substrate" />
    <!-- as 0.603mol and 80mL EtOAc -->
    <Reagent
      id="TMSCl_solution" />
    <Reagent
      id="EtOAc" />

    <!-- Third step chemicals -->
    <!-- as 1M solution in THF -->
    <Reagent
      id="KOtBu_solution" />
    <!-- as 1M solution in THF -->
    <Reagent
      id="HCE_solution" />
    <Reagent
      id="THF" />
    <Reagent
      id="toluene" />
    <Reagent
      id="DCM" />

    <!-- Fourth step chemicals -->
    <Reagent
      id="substrateS3" />
    <Reagent
      id="KF" />
    <Reagent
      id="KBF4" />
    <Reagent
      id="acetonitrile" />
    <Reagent
      id="ether" />
    <Reagent
      id="DCM" />
  </Reagents>

  <Procedure>
    <!-- First step -->
    <Add
      reagent="MeOH"
      volume="250mL"
      vessel="jacketed_filter"
      stir="True"
    />
    <Add
      reagent="2_6_diisopropylaniline"
      volume="210mL"
      vessel="jacketed_filter"
      stir="true"
    />
    <Add
      reagent="HOAc"
      volume="1mL"
      vessel="jacketed_filter"
      stir="true"
    />
    <HeatChillToTemp
      vessel="jacketed_filter"
      temp="50"
      stir="true" />
    <Add
      reagent="glyoxal_solution"
      vessel="jacketed_filter"
      volume="all"
      stir="true"
      stir_speed="500"
    />
    <Stir
      vessel="jacketed_filter"
      time="15min"
      stir_speed="500" />
    <HeatChill
      vessel="jacketed_filter"
      temp="23"
      time="10h"
      stir="true" />
    <Filter
      filter_vessel="jacketed_filter" />
    <WashSolid
      vessel="jacketed_filter"
      solvent="MeOH"
      volume="100mL"
      stir="solvent"
      stir_time="5min"
      stir_speed="800"
      vacuum_time="1min"
      repeat="3" />
    <!-- Second step -->
    <!-- SOLID ADDITION -->
    <!--
    <Add
      reagent="paraformaldehyde"
      volume="18.1g"
      vessel="jacketed_filter" />
    <Add
      reagent="substrateS1"
      volume="226g"
      vessel="jacketed_filter" />
    -->
    <Add
      reagent="EtOAc"
      volume="5.4L"
      vessel="jacketed_filter"
      stir="True"
    />
    <!-- ADD VOLUME IN THIS STEP -->
    <Add
      reagent="TMSCl_solution"
      vessel="jacketed_filter"
      volume="100 mL"
      time="45min"
      stir="True"
      stir_speed="500"
    />
    <HeatChill
      vessel="jacketed_filter"
      temp="70"
      time="2h"
      stir="true"
      stir_speed="400" />
    <HeatChillToTemp
      vessel="jacketed_filter"
      temp="10"
      stir="True"
      stir_speed="400" />
    <!-- For better crystallization -->
    <Stir
      vessel="jacketed_filter"
      time="1h"
      stir_speed="250" />
    <Filter
      filter_vessel="jacketed_filter" />
    <WashSolid
      vessel="jacketed_filter"
      solvent="EtOAc"
      volume="500mL"
      stir_time="15min"
      stir_speed="500"
      repeat="3" />
    <Dry
      vessel="jacketed_filter"
      time="2h" />
    <StopHeatChill
      vessel="jacketed_filter" />
    <!-- Third step -->
    <!-- SOLID ADDITION -->
    <!-- <Add
      reagent="substrateS2"
      mass="150g"
      vessel="jacketed_filter" /> -->
    <Add
      reagent="THF"
      volume="700mL"
      vessel="jacketed_filter"
      stir="True"
    />
    <HeatChillToTemp
      vessel="jacketed_filter"
      temp="23"
      stir="True"
      stir_speed="400" />
    <Add
      reagent="KOtBu_solution"
      volume="423mL"
      vessel="jacketed_filter"
      dispense_speed="5"
      stir="True"
      stir_speed="250"
    />
    <HeatChill
      vessel="jacketed_filter"
      temp="23"
      time="4h"
      stir="true"
      stir_speed="400" />
    <HeatChillToTemp
      vessel="jacketed_filter"
      temp="-40"
      stir="True"
      stir_speed="400" />
    <Add
      reagent="HCE_solution"
      volume="423ml"
      vessel="jacketed_filter"
      dispense_speed="1"
      stir="True"
      stir_speed="500"
    />
    <HeatChill
      vessel="jacketed_filter"
      temp="23"
      time="24h"
      stir="True"
      stir_speed="300" />
    <HeatChillToTemp
      vessel="jacketed_filter"
      temp="-40"
      stir="True"
      stir_speed="400" />
    <!-- For better precipitation -->
    <Stir
      vessel="jacketed_filter"
      time="30min" />
    <Filter
      filter_vessel="jacketed_filter" />
    <WashSolid
      vessel="jacketed_filter"
      solvent="THF"
      volume="100mL"
      stir="solvent"
      stir_speed="700"
      stir_time="5min"
      vacuum_time="5 min"
      repeat="3" />
    <WashSolid
      vessel="jacketed_filter"
      solvent="toluene"
      volume="100ml"
      stir="solvent"
      stir_speed="500"
      stir_time="5min"
      repeat="6" />
    <HeatChillReturnToRT
      vessel="jacketed_filter"
      stir="False" />
    <Dry
      vessel="jacketed_filter" />
    <Dissolve
      solvent="DCM"
      volume="500ml"
      vessel="jacketed_filter" />
    <FilterThrough
      from_vessel="jacketed_filter"
      to_vessel="rotavap"
      through_cartridge="cartridge_celite_A"
      eluting_solvent="DCM"
      eluting_volume="50ml"
      eluting_repeats="3" />
    <Evaporate
      rotavap_name="rotavap"
      temp="40"
      pressure="750"
      time="1h" />
    <Dry
      vessel="rotavap"
      time="1h"
      temp="23"
      vacuum_pressure="50mbar" />
    <!-- <CleanVessel
      vessel="jacketed_filter"
      solvent="THF"
      volume="50ml" />
    <CleanVessel
      vessel="jacketed_filter"
      solvent="acetonitrile"
      volume="50ml" /> -->
    <Dry
      vessel="jacketed_filter"
      temp="50"
      time="1h"
      vacuum_pressure="50mbar" />
  	<!-- Forth step -->
    <!-- SOLID ADDITION -->
    <!--
    <Add
      reagent="KF"
      volume="7.97g"
      vessel="jacketed_filter" />
    -->
    <!--
    <Add
      reagent="KBF4"
      volume="28.8g"
      vessel="jacketed_filter" />
    -->
    <Dry
      vessel="jacketed_filter"
      temp="40"
      time="2h"
      vacuum_pressure="50mbar" />
  	<Add
  	  reagent="acetonitrile"
  	  volume="200mL"
  	  vessel="jacketed_filter"
  	  stir="True"
      stir_speed="250"
    />
    <Dissolve
      vessel="rotavap"
      solvent="acetonitrile"
      volume="100ml"
      stir_speed="250"
      time="10min" />
    <Transfer
      from_vessel="rotavap"
      to_vessel="jacketed_filter"
      to_port="top"
      volume="all"
      from_port="evaporate" />
    <!-- <CleanVessel
      vessel="rotavap"
      solvent="acetonitrile"
      volume="40ml"
      repeat="3" /> -->
    <HeatChill
      vessel="jacketed_filter"
      temp="80"
      time="16h"
      stir="True"
      stir_speed="500" />
    <HeatChillReturnToRT
      vessel="jacketed_filter"
      stir="True" />
    <FilterThrough
      from_vessel="jacketed_filter"
      to_vessel="rotavap"
      through_cartridge="cartridge_celite_B"
      eluting_solvent="DCM"
      eluting_volume="25ml"
      eluting_repeats="3" />
    <Evaporate
      rotavap_name="rotavap"
      temp="40"
      pressure="200"
      time="1h" />
    <Dissolve
      vessel="rotavap"
      solvent="DCM"
      volume="200ml"
      stir_speed="250"
      time="10min" />
    <FilterThrough
      from_vessel="rotavap"
      to_vessel="buffer_flask"
      through_cartridge="cartridge_celite_C"
      eluting_solvent="DCM"
      eluting_volume="25ml"
      eluting_repeats="3" />
    <!-- <CleanVessel
      vessel="rotavap"
      solvent="DCM"
      volume="40ml"
      repeat="3" /> -->
    <Transfer
      from_vessel="buffer_flask"
      to_vessel="rotavap"
      volume="all" />
    <WashSolid
      vessel="rotavap"
      stir_speed="250"
      stir_time="10min"
      solvent="ether"
      volume="15ml"
      repeat="3" />
    <Dry
      vessel="rotavap"
      temp="23"
      time="1h"
      vacuum_pressure="100mbar"
    />
      <!-- stir="True"
      stir_speed="50" -->
  </Procedure>
</Synthesis>
